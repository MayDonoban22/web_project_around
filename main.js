!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function r(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var o=new WeakSet,i=function(){return e=function e(t,n,r,i,c,u,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,o),this._title=t.name,this._image=t.link,this._id=t._id,this._likes=t.likes,this._owner=t.owner,this._handleCardClick=n,this.templateSelector=r,this._handleLikeCard=i,this._handleDislikeCard=c,this._handleDeleteCard=u,this._userId=a},(n=[{key:"removeCard",value:function(){this.cardElement.remove()}},{key:"createCard",value:function(){return r(o,this,s).call(this),r(o,this,l).call(this),this.cardElement}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function c(){return console.log(this.templateSelector.content),this.templateSelector.content.querySelector(".content__element").cloneNode(!0)}function u(){var e=this;this.likeIcon.classList.add("content__description-like-focus"),this._handleLikeCard(this._id).then((function(t){e._likes=t.likes,e.cardElement.querySelector(".content__like-number").textContent=e._likes.length}))}function a(){var e=this;this._handleDislikeCard(this._id).then((function(t){e._likes=t.likes,e.cardElement.querySelector(".content__like-number").textContent=e._likes.length})),this.likeIcon.classList.remove("content__description-like-focus")}function l(){var e=this;this.trashIcon.addEventListener("click",(function(){e._handleDeleteCard()})),this.likeIcon.addEventListener("click",(function(){e._likes.find((function(t){return t._id===e._userId}))?r(o,e,a).call(e):r(o,e,u).call(e)})),this.cardImage.addEventListener("click",(function(){e._handleCardClick(e._title,e._image)}))}function s(){var e=this;this.cardElement=r(o,this,c).call(this),this.cardImage=this.cardElement.querySelector(".content__element-picture"),this.cardImage.src=this._image,this.cardTitle=this.cardElement.querySelector(".content__description-text"),this.cardTitle.textContent=this._title,this.trashIcon=this.cardElement.querySelector(".content__bin"),this.likeIcon=this.cardElement.querySelector(".content__description-like"),this.cardElement.id="id-".concat(this._id),this.cardElement.querySelector(".content__like-number").textContent=this._likes.length,console.log(this._likes,this._owner),this._likes.find((function(t){return t._id===e._userId}))?this.cardElement.querySelector(".content__description-like").classList.add("content__description-like-focus"):this.cardElement.querySelector(".content__description-like").classList.remove("content__description-like-focus")}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var d=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formElement=t,this.settings=n},(t=[{key:"showInputError",value:function(e,t){var n=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this.settings.inputErrorClass),n.textContent=t}},{key:"hideInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this.settings.inputErrorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this.hideInputError(e):this.showInputError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this;this.inputList=Array.from(this.formElement.querySelectorAll(this.settings.inputSelector)),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t)}))}))}},{key:"enableValidation",value:function(){this.formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),h=document.querySelector(".content__profession"),m=document.querySelector(".content__name"),b=document.querySelector(".content__image"),v=document.querySelector("#popup-profile"),_=document.querySelector("#popup-place"),S=(document.querySelector("#delete-card"),{formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__update",inactiveButtonClass:"popup__update_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var g=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t),this.closeButton=this.popupElement.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)},(t=[{key:"open",value:function(){this.popupElement.classList.add("popup_show"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupElement.classList.remove("popup_show"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleClickClose",value:function(e){return e.target.classList.contains("popup__overlay")}},{key:"setEventListeners",value:function(){var e=this;this.closeButton.addEventListener("click",(function(){e.close()})),this.popupElement.addEventListener("click",(function(t){e._handleClickClose(t)&&e.close()}))}}])&&E(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function L(e,t,n,r){var o=T(q(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(null,arguments)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var U=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,n){return t=q(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}(this,t,[e]))._form=r.popupElement.querySelector(".popup__form"),r._handleFormSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),n=t,(r=[{key:"getInputValues",value:function(){var e={};return this._form.querySelectorAll(".popup__item").forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;L(t,"setEventListeners",this,3)([]),this._form.addEventListener("submit",(function(n){n.preventDefault(),e._handleFormSubmit(e.getInputValues()),L(t,"close",e,3)([])}))}}])&&O(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e){if("object"!=A(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(t)?t:t+""}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(null,arguments)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=N(t),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],N(e).constructor):t.apply(e,n))}(this,t,[e])).imageElement=n.popupElement.querySelector(".popup__picture-src"),n.titleElement=n.popupElement.querySelector(".popup__picture-title"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,r=[{key:"open",value:function(e,n){var r,o,i;(r=t,o=this,"function"==typeof(i=B(N(1&3?r.prototype:r),"open",o))?function(e){return i.apply(o,e)}:i)([]),this.titleElement.textContent=e,this.imageElement.src=n}}],r&&D(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var H=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this.renderer=o,this._container=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addFirst",value:function(e){this._container.prepend(e)}},{key:"render",value:function(){var e=this;this.items.forEach((function(t){e.renderer(t)}))}}])&&z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function K(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}var Q=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=t,this.userAbout=n,this.userAvatar=r},(t=[{key:"getUserInfo",value:function(){return{name:this.userName.textContent,about:this.userAbout.textContent}}},{key:"setUserInfo",value:function(e,t,n){this.userName.textContent=e,this.userAbout.textContent=t,this.userAvatar.src=n}},{key:"setUserAvatar",value:function(e){this.userAvatar.src=e}}])&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function Z(e){var t=function(e){if("object"!=X(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}var $=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.headers=n},(t=[{key:"getUsers",value:function(){return fetch("".concat(this.baseUrl,"users/me"),{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"getCards",value:function(){return fetch("".concat(this.baseUrl,"cards"),{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"editUser",value:function(e,t){return fetch("".concat(this.baseUrl,"users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"createCard",value:function(e,t){return fetch("".concat(this.baseUrl,"cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"likesCard",value:function(e){return fetch("".concat(this.baseUrl,"cards/likes/").concat(e),{method:"PUT",headers:this.headers,body:JSON.stringify()}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this.baseUrl,"cards/likes/").concat(e),{method:"DELETE",headers:this.headers,body:JSON.stringify()}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}},{key:"editAvatar",value:function(e){return fetch("".concat(this.baseUrl,"users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Error en la solicitud")}))}}])&&Y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function ne(e){var t=function(e){if("object"!=ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:t+""}function re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(re=function(){return!!e})()}function oe(){return oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ie(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},oe.apply(null,arguments)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}var ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=ie(t),function(e,t){if(t&&("object"==ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,re()?Reflect.construct(t,n||[],ie(e).constructor):t.apply(e,n))}(this,t,[e]))._action=function(){},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(t,e),n=t,r=[{key:"setAction",value:function(e){this._action=e}},{key:"setEventListeners",value:function(){var e,n,r,o=this;(e=t,n=this,"function"==typeof(r=oe(ie(1&3?e.prototype:e),"setEventListeners",n))?function(e){return r.apply(n,e)}:r)([]),this.popupElement.querySelector(".popup__update").addEventListener("click",(function(){o._action()}))}}],r&&te(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e,t,n){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=new Q(m,h,b),pe=new $("https://around.nomoreparties.co/v1/web-es-cohort-16/",{authorization:"58c8565b-3277-481a-9668-647f085b663c","Content-Type":"application/json"});pe.getUsers().then((function(e){fe.setUserInfo(e.name,e.about,e.avatar)})),pe.getCards().then((function(e){var t=new H({renderer:function(e){var n=new i(e,(function(){return Se.open(e.name,e.link)}),ye,(function(){return pe.likesCard(e._id)}),(function(){return pe.deleteLike(e._id)}),(function(){ve.open(),ve.setAction((function(){pe.deleteCard(e._id).then((function(){n.removeCard(),ve.close()}))}))}),"8f9763feed63dc78a176f2fe");t.addItem(n.createCard())},items:e},".content__elements");t.render();var n=new U("#popup-place",(function(e){pe.createCard(e.title,e.link).then((function(e){var n=new i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:e.name,link:e.link},e),(function(){Se.open(e.name,e.link)}),ye,(function(){return pe.likesCard(e._id)}),(function(){return pe.deleteLike(e._id)}),(function(){ve.open(),ve.setAction((function(){pe.deleteCard(e._id).then((function(){n.removeCard(),ve.close()}))}))}),"8f9763feed63dc78a176f2fe");t.addFirst(n.createCard())}))}));n.setEventListeners(),he.addEventListener("click",(function(){return n.open()}))}));var ye=document.querySelector("template"),de=document.querySelector(".content__edit-button"),he=document.querySelector(".content__plus-button"),me=document.querySelector(".content__image-overlay"),be=new U("#popup-profile",(function(e){pe.editUser(e.name,e.about).then((function(e){fe.setUserInfo(e.name,e.about,e.avatar)}))})),ve=new ue("#delete-card");ve.setEventListeners();var _e=new U("#edit-avatar",(function(e){pe.editAvatar(e).then((function(e){fe.setUserAvatar(e.avatar)}))})),Se=new J("#popup-image");be.setEventListeners(),Se.setEventListeners(),_e.setEventListeners(),de.addEventListener("click",(function(){return be.open()})),me.addEventListener("click",(function(){return _e.open()})),new d(v,S).enableValidation(),new d(_,S).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FDdEQsR0FDRixJQUVNNkIsR0FBa0IsSUFBSWYsR0FBc0IsZ0JBQ2xEZSxHQUFnQlUsb0JBRWhCLElBQU1NLEdBQW9CLElBQUkxRSxFQUFjLGdCQUFnQixTQUFDTyxHQUMzRHdDLEdBQUk0QixXQUFXcEUsR0FBYW5FLE1BQUssU0FBQzVDLEdBQ2hDc0osR0FBWThCLGNBQWNwTCxFQUFLcUksT0FDakMsR0FDRixJQUVNeUIsR0FBaUIsSUFBSTNDLEVBQWUsZ0JBRTFDNkQsR0FBYUosb0JBRWJkLEdBQWVjLG9CQUVmTSxHQUFrQk4sb0JBQ2xCRSxHQUFXMUgsaUJBQWlCLFNBQVMsa0JBQU00SCxHQUFhakIsTUFBTSxJQUM5RGdCLEdBQWEzSCxpQkFBaUIsU0FBUyxrQkFBTThILEdBQWtCbkIsTUFBTSxJQUUzQyxJQUFJbEcsRUFBYzBCLEVBQU14QixHQUNoQ3NILG1CQUVVLElBQUl4SCxFQUFjMkIsRUFBV3pCLEdBQ3JDc0gsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxuICAgIGhhbmRsZUxpa2VDYXJkLFxuICAgIGhhbmRsZURpc2xpa2VDYXJkLFxuICAgIGhhbmRsZURlbGV0ZUNhcmQsXG4gICAgdXNlcklkXG4gICkge1xuICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy50ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgIHRoaXMuX2hhbmRsZURpc2xpa2VDYXJkID0gaGFuZGxlRGlzbGlrZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICB9XG4gICNnZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnRlbXBsYXRlU2VsZWN0b3IuY29udGVudCk7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVTZWxlY3Rvci5jb250ZW50XG5cbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2VsZW1lbnRcIilcblxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuICAjbGlrZUNhcmQoKSB7XG4gICAgdGhpcy5saWtlSWNvbi5jbGFzc0xpc3QuYWRkKFwiY29udGVudF9fZGVzY3JpcHRpb24tbGlrZS1mb2N1c1wiKTtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzLl9pZCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VzID0gcmVzcG9uc2UubGlrZXM7XG4gICAgICBjb25zdCBsaWtlQ291bnRlciA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgXCIuY29udGVudF9fbGlrZS1udW1iZXJcIlxuICAgICAgKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH0pO1xuICB9XG4gICNkaXNsaWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9oYW5kbGVEaXNsaWtlQ2FyZCh0aGlzLl9pZCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VzID0gcmVzcG9uc2UubGlrZXM7XG4gICAgICBjb25zdCBsaWtlQ291bnRlciA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgXCIuY29udGVudF9fbGlrZS1udW1iZXJcIlxuICAgICAgKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH0pO1xuICAgIHRoaXMubGlrZUljb24uY2xhc3NMaXN0LnJlbW92ZShcImNvbnRlbnRfX2Rlc2NyaXB0aW9uLWxpa2UtZm9jdXNcIik7XG4gIH1cbiAgcmVtb3ZlQ2FyZCgpIHtcbiAgICB0aGlzLmNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudHJhc2hJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgfSk7XG4gICAgdGhpcy5saWtlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKSB7XG4gICAgICAgIHRoaXMuI2Rpc2xpa2VDYXJkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiNsaWtlQ2FyZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fdGl0bGUsIHRoaXMuX2ltYWdlKTtcbiAgICB9KTtcbiAgfVxuICAjc2V0UHJvcGVydGllcygpIHtcbiAgICB0aGlzLmNhcmRFbGVtZW50ID0gdGhpcy4jZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLmNhcmRJbWFnZSA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNvbnRlbnRfX2VsZW1lbnQtcGljdHVyZVwiXG4gICAgKTtcbiAgICB0aGlzLmNhcmRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZTtcbiAgICB0aGlzLmNhcmRUaXRsZSA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNvbnRlbnRfX2Rlc2NyaXB0aW9uLXRleHRcIlxuICAgICk7XG4gICAgdGhpcy5jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLnRyYXNoSWNvbiA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19iaW5cIik7XG4gICAgdGhpcy5saWtlSWNvbiA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNvbnRlbnRfX2Rlc2NyaXB0aW9uLWxpa2VcIlxuICAgICk7XG4gICAgdGhpcy5jYXJkRWxlbWVudC5pZCA9IGBpZC0ke3RoaXMuX2lkfWA7XG5cbiAgICBjb25zdCBsaWtlQ291bnRlciA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19saWtlLW51bWJlclwiKTtcbiAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9saWtlcywgdGhpcy5fb3duZXIpO1xuXG4gICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKSB7XG4gICAgICB0aGlzLmNhcmRFbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2Rlc2NyaXB0aW9uLWxpa2VcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjb250ZW50X19kZXNjcmlwdGlvbi1saWtlLWZvY3VzXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhcmRFbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2Rlc2NyaXB0aW9uLWxpa2VcIilcbiAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250ZW50X19kZXNjcmlwdGlvbi1saWtlLWZvY3VzXCIpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy4jc2V0UHJvcGVydGllcygpO1xuICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICB9XG4gIHNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICB9XG4gIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIGhhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fcHJvZmVzc2lvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1QbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtcGxhY2VcIik7XG5leHBvcnQgY29uc3QgZm9ybUNvbmZpcm1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWNhcmRcIik7XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faXRlbVwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3VwZGF0ZVwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX191cGRhdGVfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLnBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5jbG9zZUJ1dHRvbiA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9zaG93XCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9zaG93XCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgX2hhbmRsZUNsaWNrQ2xvc2UoZXZ0KSB7XG4gICAgcmV0dXJuIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX292ZXJsYXlcIik7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAodGhpcy5faGFuZGxlQ2xpY2tDbG9zZShldnQpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIGdldElucHV0VmFsdWVzKCkge1xuICAgIGxldCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faXRlbVwiKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50ID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGljdHVyZS1zcmNcIik7XG4gICAgdGhpcy50aXRsZUVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX3BpY3R1cmUtdGl0bGVcIlxuICAgICk7XG4gIH1cbiAgb3Blbih0aXRsZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLnRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cbiAgYWRkRmlyc3QoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckFib3V0LCB1c2VyQXZhdGFyKSB7XG4gICAgdGhpcy51c2VyTmFtZSA9IHVzZXJOYW1lO1xuICAgIHRoaXMudXNlckFib3V0ID0gdXNlckFib3V0O1xuICAgIHRoaXMudXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy51c2VyQWJvdXQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCwgYXZhdGFyKSB7XG4gICAgdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy51c2VyQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB0aGlzLnVzZXJBdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy51c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoYmFzZVVybCwgaGVhZGVycykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuICBnZXRVc2VycygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfXVzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJFcnJvciBlbiBsYSBzb2xpY2l0dWRcIik7XG4gICAgfSk7XG4gIH1cbiAgZ2V0Q2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH1jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiRXJyb3IgZW4gbGEgc29saWNpdHVkXCIpO1xuICAgIH0pO1xuICB9XG4gIGVkaXRVc2VyKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH11c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJFcnJvciBlbiBsYSBzb2xpY2l0dWRcIik7XG4gICAgfSk7XG4gIH1cbiAgY3JlYXRlQ2FyZChuYW1lLCBsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH1jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiRXJyb3IgZW4gbGEgc29saWNpdHVkXCIpO1xuICAgIH0pO1xuICB9XG4gIGxpa2VzQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfWNhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KCksXG4gICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgIGlmIChyZXNwb25zZS5vaykgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIkVycm9yIGVuIGxhIHNvbGljaXR1ZFwiKTtcbiAgICB9KTtcbiAgfVxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9Y2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoKSxcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiRXJyb3IgZW4gbGEgc29saWNpdHVkXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfWNhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiRXJyb3IgZW4gbGEgc29saWNpdHVkXCIpO1xuICAgIH0pO1xuICB9XG4gIGVkaXRBdmF0YXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9dXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiRXJyb3IgZW4gbGEgc29saWNpdHVkXCIpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWN0aW9uID0gKCkgPT4ge307XG4gIH1cblxuICBzZXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnBvcHVwRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3VwZGF0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2FjdGlvbigpO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7XG4gIGZvcm0sXG4gIGZvcm1QbGFjZSxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVBYm91dCxcbiAgcHJvZmlsZUF2YXRhcixcbiAgc2V0dGluZ3MsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL3V0aWxzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuXG5jb25zdCB1c2VyUHJvZmlsZSA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUFib3V0LCBwcm9maWxlQXZhdGFyKTtcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1lcy1jb2hvcnQtMTYvXCIsIHtcbiAgYXV0aG9yaXphdGlvbjogXCI1OGM4NTY1Yi0zMjc3LTQ4MWEtOTY2OC02NDdmMDg1YjY2M2NcIixcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG59KTtcblxuYXBpLmdldFVzZXJzKCkudGhlbigoZGF0YSkgPT4ge1xuICB1c2VyUHJvZmlsZS5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQsIGRhdGEuYXZhdGFyKTtcbn0pO1xuXG5hcGkuZ2V0Q2FyZHMoKS50aGVuKChkYXRhKSA9PiB7XG4gIGNvbnN0IHNlY3Rpb25DYXJkID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgICBpdGVtLFxuICAgICAgICAgICgpID0+IHBvcHVwU2hvd0ltYWdlLm9wZW4oaXRlbS5uYW1lLCBpdGVtLmxpbmspLFxuICAgICAgICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGFwaS5saWtlc0NhcmQoaXRlbS5faWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGFwaS5kZWxldGVMaWtlKGl0ZW0uX2lkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5vcGVuKCk7XG4gICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuc2V0QWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoaXRlbS5faWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZSgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgXCI4Zjk3NjNmZWVkNjNkYzc4YTE3NmYyZmVcIlxuICAgICAgICApO1xuICAgICAgICBzZWN0aW9uQ2FyZC5hZGRJdGVtKGNhcmQuY3JlYXRlQ2FyZCgpKTtcbiAgICAgIH0sXG5cbiAgICAgIGl0ZW1zOiBkYXRhLFxuICAgIH0sXG4gICAgXCIuY29udGVudF9fZWxlbWVudHNcIlxuICApO1xuICBzZWN0aW9uQ2FyZC5yZW5kZXIoKTtcbiAgY29uc3QgcG9wdXBBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcGxhY2VcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgYXBpLmNyZWF0ZUNhcmQoaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmxpbmspLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgeyBuYW1lOiBkYXRhLm5hbWUsIGxpbms6IGRhdGEubGluaywgLi4uZGF0YSB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgcG9wdXBTaG93SW1hZ2Uub3BlbihkYXRhLm5hbWUsIGRhdGEubGluayk7XG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXBpLmxpa2VzQ2FyZChkYXRhLl9pZCk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXBpLmRlbGV0ZUxpa2UoZGF0YS5faWQpO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgcG9wdXBEZWxldGVDYXJkLm9wZW4oKTtcbiAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuc2V0QWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGRhdGEuX2lkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XG4gICAgICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiOGY5NzYzZmVlZDYzZGM3OGExNzZmMmZlXCJcbiAgICAgICk7XG5cbiAgICAgIHNlY3Rpb25DYXJkLmFkZEZpcnN0KGNhcmQuY3JlYXRlQ2FyZCgpKTtcbiAgICB9KTtcbiAgfSk7XG4gIHBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuICBwbHVzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBwb3B1cEFkZENhcmQub3BlbigpKTtcbn0pO1xuXG5jb25zdCB0ZW1wbGF0ZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRlbXBsYXRlXCIpO1xuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZWRpdC1idXR0b25cIik7XG5jb25zdCBwbHVzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wbHVzLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9faW1hZ2Utb3ZlcmxheVwiKTtcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3BvcHVwLXByb2ZpbGVcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGFwaS5lZGl0VXNlcihpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5hYm91dCkudGhlbigoZGF0YSkgPT4ge1xuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dCwgZGF0YS5hdmF0YXIpO1xuICB9KTtcbn0pO1xuXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI2RlbGV0ZS1jYXJkXCIpO1xucG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwSW1hZ2VQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjZWRpdC1hdmF0YXJcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGFwaS5lZGl0QXZhdGFyKGlucHV0VmFsdWVzKS50aGVuKChkYXRhKSA9PiB7XG4gICAgdXNlclByb2ZpbGUuc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gIH0pO1xufSk7XG5cbmNvbnN0IHBvcHVwU2hvd0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLWltYWdlXCIpO1xuXG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucG9wdXBTaG93SW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucG9wdXBJbWFnZVByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwUHJvZmlsZS5vcGVuKCkpO1xuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBwb3B1cEltYWdlUHJvZmlsZS5vcGVuKCkpO1xuXG5jb25zdCB2YWxpZGF0aW9uUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm0sIHNldHRpbmdzKTtcbnZhbGlkYXRpb25Qcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgdmFsaWRhdGlvbkZvcm1QbGFjZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1QbGFjZSwgc2V0dGluZ3MpO1xudmFsaWRhdGlvbkZvcm1QbGFjZS5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlTGlrZUNhcmQiLCJoYW5kbGVEaXNsaWtlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJ1c2VySWQiLCJfY2xhc3NDYWxsQ2hlY2siLCJfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWMiLCJfQ2FyZF9icmFuZCIsInRoaXMiLCJfdGl0bGUiLCJuYW1lIiwiX2ltYWdlIiwibGluayIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZURpc2xpa2VDYXJkIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfdXNlcklkIiwia2V5IiwidmFsdWUiLCJjYXJkRWxlbWVudCIsInJlbW92ZSIsIl9hc3NlcnRDbGFzc0JyYW5kIiwiX3NldFByb3BlcnRpZXMiLCJjYWxsIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2dldFRlbXBsYXRlIiwiY29uc29sZSIsImxvZyIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvbmVOb2RlIiwiX2xpa2VDYXJkIiwiX3RoaXMiLCJsaWtlSWNvbiIsImNsYXNzTGlzdCIsImFkZCIsInRoZW4iLCJyZXNwb25zZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX2Rpc2xpa2VDYXJkIiwiX3RoaXMyIiwiX3RoaXMzIiwidHJhc2hJY29uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZpbmQiLCJpdGVtIiwiY2FyZEltYWdlIiwiX3RoaXM0Iiwic3JjIiwiY2FyZFRpdGxlIiwiaWQiLCJjb25jYXQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJoaWRlSW5wdXRFcnJvciIsInNob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJzb21lIiwicHJvZmlsZUFib3V0IiwiZG9jdW1lbnQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVBdmF0YXIiLCJmb3JtIiwiZm9ybVBsYWNlIiwiZm9ybVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZXJyb3JDbGFzcyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsInBvcHVwRWxlbWVudCIsImNsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9jYWxsU3VwZXIiLCJfZm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2luaGVyaXRzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsIl9zdXBlclByb3BHZXQiLCJnZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VFbGVtZW50IiwidGl0bGVFbGVtZW50IiwidGl0bGUiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJ1c2VyQXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX2FjdGlvbiIsImFjdGlvbiIsInVzZXJQcm9maWxlIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldFVzZXJzIiwic2V0VXNlckluZm8iLCJnZXRDYXJkcyIsInNlY3Rpb25DYXJkIiwiY2FyZCIsInBvcHVwU2hvd0ltYWdlIiwib3BlbiIsImxpa2VzQ2FyZCIsImRlbGV0ZUxpa2UiLCJwb3B1cERlbGV0ZUNhcmQiLCJzZXRBY3Rpb24iLCJkZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwicmVuZGVyIiwicG9wdXBBZGRDYXJkIiwiX29iamVjdFNwcmVhZCIsImFkZEZpcnN0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwbHVzQnV0dG9uIiwiZWRpdEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsInBvcHVwUHJvZmlsZSIsImVkaXRVc2VyIiwicG9wdXBJbWFnZVByb2ZpbGUiLCJlZGl0QXZhdGFyIiwic2V0VXNlckF2YXRhciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9